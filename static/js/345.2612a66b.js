"use strict";(self.webpackChunkjira_time_tracker=self.webpackChunkjira_time_tracker||[]).push([[345],{91877:(e,s,t)=>{s.A=void 0;var a=i(t(96540)),n=t(36347),r=i(t(42370));function i(e){return e&&e.__esModule?e:{default:e}}const o=e=>a.default.createElement(n.UNSAFE_IconFacade,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentcolor" fill-rule="evenodd" d="M15.148 6.852a.5.5 0 0 1 .708.004l2.288 2.288a.5.5 0 0 1 .004.708L11 17l-3-3zM7 15l3 3-3.51.877c-.27.068-.436-.092-.367-.367z"/></svg>'},e,{newIcon:r.default}));o.displayName="EditorEditIcon";s.A=o},78397:(e,s,t)=>{s.A=void 0;var a=i(t(96540)),n=t(36347),r=i(t(31821));function i(e){return e&&e.__esModule?e:{default:e}}const o=e=>a.default.createElement(n.UNSAFE_IconFacade,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentcolor" fill-rule="evenodd" d="M7 7h10a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2m2.78 11a1 1 0 0 1-.97-.757L7.156 10.62A.5.5 0 0 1 7.64 10h8.72a.5.5 0 0 1 .485.621l-1.656 6.622a1 1 0 0 1-.97.757zM11 6h2a1 1 0 0 1 1 1h-4a1 1 0 0 1 1-1"/></svg>'},e,{newIcon:r.default}));o.displayName="EditorRemoveIcon";s.A=o},46345:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Q});var a=t(97286),n=t(14638),r=t(58124),i=t(96077),o=t(67459),l=t(12596),d=t(64467),c=t(96540),u=t(17437),p=t(10354),m=t(53857),g="--ds-grid--grid-template-areas",A="--ds-grid--grid-template-columns",x="--ds-grid--grid-template-rows",f={start:(0,u.AH)({justifyContent:"start"}),center:(0,u.AH)({justifyContent:"center"}),end:(0,u.AH)({justifyContent:"end"}),"space-between":(0,u.AH)({justifyContent:"space-between"}),"space-around":(0,u.AH)({justifyContent:"space-around"}),"space-evenly":(0,u.AH)({justifyContent:"space-evenly"}),stretch:(0,u.AH)({justifyContent:"stretch"})},y=((0,u.AH)({justifyItems:"start"}),(0,u.AH)({justifyItems:"center"}),(0,u.AH)({justifyItems:"end"}),(0,u.AH)({justifyItems:"stretch"}),{start:(0,u.AH)({alignContent:"start"}),center:(0,u.AH)({alignContent:"center"}),end:(0,u.AH)({alignContent:"end"}),"space-between":(0,u.AH)({alignContent:"space-between"}),"space-around":(0,u.AH)({alignContent:"space-around"}),"space-evenly":(0,u.AH)({alignContent:"space-evenly"}),stretch:(0,u.AH)({alignContent:"stretch"})}),h={start:(0,u.AH)({alignItems:"start"}),center:(0,u.AH)({alignItems:"center"}),baseline:(0,u.AH)({alignItems:"baseline"}),end:(0,u.AH)({alignItems:"end"})},j=(0,u.AH)({display:"grid",boxSizing:"border-box",gridTemplateAreas:"var(".concat(g,")"),gridTemplateColumns:"var(".concat(A,")"),gridTemplateRows:"var(".concat(x,")")}),w={row:(0,u.AH)({gridAutoFlow:"row"}),column:(0,u.AH)({gridAutoFlow:"column"}),dense:(0,u.AH)({gridAutoFlow:"dense"}),"row dense":(0,u.AH)({gridAutoFlow:"row dense"}),"column dense":(0,u.AH)({gridAutoFlow:"column dense"})},v=(0,c.memo)((0,c.forwardRef)((function(e,s){var t=e.as,a=e.alignItems,n=e.alignContent,r=e.justifyContent,i=e.gap,o=e.columnGap,l=e.rowGap,v=e.children,b=e.id,C=e.role,I=e.testId,H=e.autoFlow,S=e.templateAreas,k=e.templateRows,N=e.templateColumns,F=e.xcss,q=t||"div",T=(0,m.xV)(F),E=(0,c.useMemo)((function(){var e;return e={},(0,d.A)(e,g,S&&S.map((function(e){return'"'.concat(e,'"')})).join("\n")||"initial"),(0,d.A)(e,A,N||"initial"),(0,d.A)(e,x,k||"initial"),e}),[S,N,k]);return(0,u.Y)(q,{id:b,role:C,style:E,className:T.static,css:[j,i&&p.D.gap[i],o&&p.D.columnGap[o],l&&p.D.rowGap[l],a&&h[a],n&&y[n],r&&f[r],H&&w[H],T.emotion],"data-testid":I,ref:s},v)})));v.displayName="Grid";const b=v;var C=t(15490),I=t(18720),H=t(6785),S=t(95995),k=t(47198),N=t(64561),F=t(79964),q=t(17673),T=t(91877),E=t(78397),G=t(46742),K=t(52222),_=t(52340),B=t(54707),D=t(75396),M=t(45366),U=t(74848);const P=e=>{const{fields:s,id:t,issueKey:a,queryKey:n}=e,i=(0,r.QN)((e=>e.issueIdsSearchParams.currentParams.includes(t))),o=(0,c.useCallback)((()=>[n]),[n]),l=(0,M.ye)(s);return(0,U.jsxs)(M.qF,{active:!1,children:[(0,U.jsx)(M.FT,{fields:s}),(0,U.jsx)(M.Ke,{issueKey:a,created:s.created,issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,projectName:s.project.name,priorityIconUrl:s.priority.iconUrl,avatarUrl:s.project.avatarUrls["32x32"],priorityName:s.priority.name}),(0,U.jsxs)(_.A,{justifyContent:"space-between",gap:"space.100",wrap:"wrap",children:[(0,U.jsxs)(_.A,{gap:"space.100",wrap:"wrap",children:[(0,U.jsx)(G.u,{issueId:t,issueName:s.summary,status:s.status,queryKeys:o,trigger:s.status.name,xcss:l.STATUTES_DROPDOWN_BUTTON}),(0,U.jsx)(K.A,{assignee:s.assignee,issueName:s.summary,issueKey:a,queryKeys:o}),(0,U.jsx)(D.g,{issueId:t}),(0,U.jsx)(k.k9,{issueId:t,isDeleteGroup:!1,isEditGroup:!1,isAddNewGroup:!1})]}),(0,U.jsx)(G.u,{issueId:t,issueName:s.summary,status:s.status,queryKeys:o,position:"left",onMutate:async()=>{await r.QN.getState().changeIssueIdsSearchParams("add",t)},trigger:(e,s)=>(0,U.jsx)(N.A,{...e,ref:e.triggerRef,icon:B.A,label:"Play",isLoading:s,isDisabled:i,isTooltipDisabled:!1,tooltip:{content:i?"Already tracking":"Play"}})})]})]})},R=(0,c.memo)(P);var L=t(3973),z=t(82568);const O=(0,c.memo)((e=>{let{issueIds:s,name:t}=e;const r=`favorite group ${t}`,{data:l,isFetching:d,refetch:u,error:p}=(0,a.I)({queryKey:[r],queryFn:async e=>{const t=new Set(s),a=Array.from(t),r=await n.S.get("/issues",{params:{jql:`issue in (${a.join(",")})`,maxResults:a.length},signal:e.signal}),i=new Map;return r.data?.issues.forEach((e=>{i.set(e.id,e)})),s.reduce(((e,s)=>(i.has(s)&&e.push(i.get(s)),e)),[])}});return(0,z.K)(p),(0,c.useEffect)((()=>{u()}),[s]),l?.length?l.map(((e,s)=>(0,U.jsx)(R,{fields:e.fields,issueKey:e.key,id:e.id,queryKey:r},e.id))):(0,U.jsx)(i.A,{header:d?"":"This group has no issues.",description:d?(0,U.jsx)(o.A,{}):""})})),V=e=>{const{name:s,issueIds:t}=e,[a,n]=(0,c.useState)(!1),[r,i]=(0,c.useState)(s),[o,d]=(0,c.useState)(!1),{reasonLoading:u,onRemoveGroup:p,onEditGroup:g}=(0,k.hO)();return(0,U.jsxs)(b,{templateColumns:"20px auto",xcss:(0,m.S7)({marginBottom:"space.200","&:last-child":{marginBottom:0}}),children:[(0,U.jsxs)(C.A,{xcss:(0,m.S7)({gridColumn:"1 / -1",backgroundColor:"color.background.neutral",display:"flex",alignItems:"center",justifyContent:"center",padding:"space.100"}),children:[(0,U.jsx)(S.A,{label:"favorite group"}),(0,U.jsx)(C.A,{xcss:(0,m.S7)({"& > form, & > form > div":{marginBottom:0,marginBlockStart:0}}),onClick:()=>{o||n((e=>!e))},children:(0,U.jsx)(F.A,{isEditing:o,defaultValue:r,editButtonLabel:r,editView:e=>{let{errorMessage:s,...t}=e;return(0,U.jsx)(q.A,{...t,autoFocus:!0})},readView:()=>(0,U.jsx)(C.A,{xcss:(0,m.S7)({maxWidth:"200px",wordBreak:"break-all"}),children:(0,U.jsx)(l.A,{size:"small",children:r})}),onConfirm:e=>{e&&e!==s&&(g(s,e),i(e),d((e=>!e)))},onCancel:()=>d((e=>!e))})}),a?(0,U.jsx)(I.A,{label:"arrow up favorite"}):(0,U.jsx)(H.default,{label:"arrow down favorite"}),(0,U.jsxs)(C.A,{xcss:(0,m.S7)({display:"flex",columnGap:"space.100","& > button":{height:"20px"}}),children:[(0,U.jsx)(N.A,{icon:T.A,label:"edit",isDisabled:u===k.iq.choose||u===k.iq.remove,isLoading:u===k.iq.edit,onClick:e=>{e.stopPropagation(),d((e=>!e))}}),(0,U.jsx)(L.w,{icon:E.A,title:"Are you sure you want to delete this group?",isLoading:u===k.iq.remove,isDisabled:u===k.iq.choose||u===k.iq.edit,onYes:()=>{p(s)}})]})]}),a&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(C.A,{xcss:(0,m.S7)({backgroundColor:"color.background.neutral",width:"20px",overflow:"hidden",position:"relative"}),children:(0,U.jsx)(C.A,{xcss:(0,m.S7)({textAlign:"center",transform:"translate(-50%, -50%) rotate(270deg)",position:"absolute",top:"50%",left:"calc(20px / 2)"}),children:(0,U.jsx)(l.A,{size:"small",children:s})})}),(0,U.jsx)(C.A,{xcss:(0,m.S7)({paddingTop:"space.100",paddingLeft:"space.100",paddingRight:"space.100"}),children:(0,U.jsx)(O,{name:s,issueIds:t})})]})]})},Q=()=>{const e=(0,k.P7)((e=>e.favorites));return(0,c.useEffect)((()=>{k.P7.setState((e=>{e.favorites=r.QN.getState().settings.favorites}))}),[]),e.length?(0,U.jsxs)(C.A,{xcss:(0,m.S7)({marginBottom:"space.400",display:"flex",columnGap:"space.100"}),children:[(0,U.jsx)(C.A,{xcss:(0,m.S7)({width:"20px",backgroundColor:"color.background.neutral",marginTop:"space.negative.300"})}),(0,U.jsx)(C.A,{xcss:(0,m.S7)({flex:1}),children:e.map((e=>{let{name:s,issueIds:t}=e;return(0,U.jsx)(V,{name:s,issueIds:t},s)}))})]}):(0,U.jsx)(i.A,{header:"No groups have been added yet.",description:null})}}}]);